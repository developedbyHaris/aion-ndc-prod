(this["webpackJsonpaion-ndc-batam"]=this["webpackJsonpaion-ndc-batam"]||[]).push([[28],{867:function(e,a,t){"use strict";t.r(a);var n=t(848),l=t(2),r=t.n(l),s=t(851),m=t(651),c=t(527),o=t(868),i=t(860),u=t(668),d=t(669),E=t(518),g=t(519),h=t(862),p=t(591),f=t(602),b=t(587),N=t(588),x=t(861),L=t(549),O=t(589),C=t(83),w=t.n(C),y=t(511),S=t.n(y),k=t(512),v=t.n(k),j=t(623),R=t.n(j),T=t(160),_=t.n(T),M=t(845),D=t.n(M),z=t(605);a.default=function(e){var a=e,t=e.daily,C=e.showPeriode,y=e.validModal,k=Object(l.useState)({editData:[]}),j=Object(n.a)(k,2),T=j[0],M=j[1],P=Object(l.useState)(t.date),F=Object(n.a)(P,2),V=F[0],A=F[1],U=Object(l.useState)(null),q=Object(n.a)(U,2),I=q[0],J=q[1],W=new _.a({encodingType:"aes"}),G=Object(l.useState)(""),B=Object(n.a)(G,2),K=B[0],H=B[1],Q=Object(l.useState)(""),X=Object(n.a)(Q,2),Y=X[0],Z=X[1],$=Object(l.useState)(""),ee=Object(n.a)($,2),ae=ee[0],te=ee[1],ne=Object(l.useState)(""),le=Object(n.a)(ne,2),re=le[0],se=le[1],me=Object(l.useState)(!1),ce=Object(n.a)(me,2),oe=ce[0],ie=ce[1],ue=Object(l.useState)(!1),de=Object(n.a)(ue,2),Ee=de[0],ge=de[1],he=function(){return ge(!Ee)},pe=t.date,fe=t.updatedAt,be=w()(fe).format("LLLL"),Ne=w()(pe),xe=Ne.format("dddd"),Le=Ne.format("LL"),Oe=Ne.format("LT"),Ce=t.created_by,we=t.updated_by;null===we&&(we={name:"-"});var ye,Se={toolbar:[["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}]],clipboard:{matchVisual:!1}},ke=["bold","italic","underline","link","list","bullet","indent"],ve=function(e){return"CLOSE"===e?"success":"OPEN"===e?"warning":"URGENT"===e?"danger":"primary"};return[r.a.createElement("tr",{id:"rowRow",key:t.uuid.toString(),className:"table-"+ve(t.status)},r.a.createElement("td",{hidden:!0},t.uuid),r.a.createElement("td",null,xe),r.a.createElement("td",null,Le),r.a.createElement("td",null,Oe),r.a.createElement("td",null,r.a.createElement("h6",null,r.a.createElement(s.a,{pill:!0,color:ve(t.status)},r.a.createElement("i",{className:"fa fa-circle mr-1"}),t.status))),r.a.createElement("td",null,t.customer_origin),r.a.createElement("td",null,r.a.createElement(D.a,{charLimit:70,readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},t.note)),r.a.createElement("td",null,Ce.name),r.a.createElement("td",null,we.name),r.a.createElement("td",{key:t.id},r.a.createElement(m.a,{size:"sm"},r.a.createElement(c.a,{id:"Detail"+t.id,hidden:(ye=t.updated_by,null===ye),onClick:function(){return ie(!oe)},className:"text-light bg-success"},r.a.createElement("i",{className:"fa fa-eye"})),r.a.createElement(o.a,{placement:"bottom",target:"Detail"+t.id},"Show Detail"),r.a.createElement(c.a,{id:"Edit"+t.id,onClick:function(e){return function(e,a){e.preventDefault();var t={uuid:a},n=JSON.stringify(t);S.a.post("log/find",n).then((function(e){return e.json()})).then((function(e){M(e.data),J(e.data.status),H(e.data.note),Z(e.data.troubleshoot_progress),te(e.data.result),se(e.data.update_progress)})).then((function(){he()})).catch((function(e){S.a.notifMessage("Anda sedang offline","danger"),console.log("Something Catch error went wrong",e)}))}(e,t.uuid)},className:"text-light bg-primary"},r.a.createElement("i",{className:"fa fa-pencil"})),r.a.createElement(o.a,{placement:"bottom",target:"Edit"+t.id},"Edit Log"),r.a.createElement(c.a,{id:"Remove"+t.id,onClick:function(){return y(t.uuid)},className:"text-light bg-danger"},r.a.createElement("i",{className:"fa fa-close"})),r.a.createElement(o.a,{placement:"bottom",target:"Remove"+t.id},"Remove Log")))),r.a.createElement("tr",{key:t.id,hidden:!oe,className:"bg-gray-200"},r.a.createElement("td",{colSpan:"12",className:"p-0 m-0"},r.a.createElement(i.a,{isOpen:oe},r.a.createElement(u.a,{className:"list-group-accent text-muted",tag:"div"},r.a.createElement(d.a,{className:"list-group-item-accent-"+ve(t.status)},r.a.createElement(E.a,null,r.a.createElement(g.a,{md:"2"},r.a.createElement(h.a,null,r.a.createElement("strong",null,"Troubleshoot Progress"))),r.a.createElement(g.a,{xs:"12",md:"10"},r.a.createElement(D.a,{readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},t.troubleshoot_progress)))),r.a.createElement(d.a,{className:"list-group-item-accent-"+ve(t.status)},r.a.createElement(E.a,null,r.a.createElement(g.a,{md:"2"},r.a.createElement(h.a,null,r.a.createElement("strong",null,"Result"))),r.a.createElement(g.a,{xs:"12",md:"10"},r.a.createElement(D.a,{readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},t.result)))),r.a.createElement(d.a,{className:"list-group-item-accent-"+ve(t.status)},r.a.createElement(E.a,null,r.a.createElement(g.a,{md:"2"},r.a.createElement(h.a,null,r.a.createElement("strong",null,"Notes"))),r.a.createElement(g.a,{xs:"12",md:"10"},r.a.createElement(D.a,{readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},t.update_progress)))),r.a.createElement(d.a,{className:"list-group-item-accent-"+ve(t.status)},r.a.createElement(E.a,null,r.a.createElement(g.a,{md:"2"},r.a.createElement(h.a,null,r.a.createElement("strong",null,"Last Updated By"))),r.a.createElement(g.a,{xs:"12",md:"4"},we.name))),r.a.createElement(d.a,{className:"list-group-item-accent-"+ve(t.status)},r.a.createElement(E.a,null,r.a.createElement(g.a,{md:"2"},r.a.createElement(h.a,null,r.a.createElement("strong",null,"Last Updated On"))),r.a.createElement(g.a,{xs:"12",md:"4"},be)))),r.a.createElement(p.a,{key:T.uuid,isOpen:Ee,size:"xl",toggle:he,className:a+" modal-"+ve(t.status)},r.a.createElement(f.a,{id:"editLog",name:"editLog",onSubmit:function(e){e.preventDefault();var a=w()().format("LLLL"),t=K;0===v()(K).text().length&&(t=T.note);var n=Y;n=0===v()(Y).text().length?"":v()(T.troubleshoot_progress).text().length<v()(Y).text().length?Y+"<p><em>- "+W.get("key").name+" on "+a+"</em></p>":Y;var l=ae;l=0===v()(ae).text().length?"":v()(T.result).text().length<v()(ae).text().length?ae+"<p><em>- "+W.get("key").name+" on "+a+"</em></p>":ae;var r=re;r=0===v()(re).text().length?"":v()(T.update_progress).text().length<v()(re).text().length?re+"<p><em>- "+W.get("key").name+" on "+a+"</em></p>":re;var s={uuid:T.uuid,date:V,shift:[{name:""},{name:""}],customer_origin:v()("#mCustomer_origin").val(),note:t,troubleshoot_progress:n,result:l,status:I,update_progress:r},m=JSON.stringify(s);S.a.put("log/update",m).then((function(e){return e.json()})).then((function(e){!0===e.success?(H(""),Z(""),te(""),se(""),C(),S.a.notifMessage("Log berhasil diubah","success")):(S.a.notifMessage("Anda Selalu Salah","danger"),console.log("Something Else went wrong"))})).then((function(){he()})).catch((function(e){S.a.notifMessage(" Koneksi Anda bermasalah","danger"),console.log("Something Catch error went wrong",e)}))}},r.a.createElement(b.a,{toggle:he},"Edit Log"),r.a.createElement(N.a,null,r.a.createElement(E.a,{className:"mr-2 ml-2"},r.a.createElement(g.a,{xs:"12",md:"6"},r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"date-input"},r.a.createElement("strong",null,"Date/Time"))),r.a.createElement(g.a,{xs:"12",md:"7"},r.a.createElement(z.DateTimePicker,{id:"mDate",format:"LLL",max:new Date,defaultValue:new Date(V),onChange:function(e){return A(e)}}))),r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"date-input"},r.a.createElement("strong",null,"Status"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(m.a,{id:"mStatus",required:!0,size:"sm"},r.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-warning",onClick:function(){return J("OPEN")},active:"OPEN"===I},"\u26ab\xa0Open"),r.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-success",onClick:function(){return J("CLOSE")},active:"CLOSE"===I},"\u26ab\xa0Close")),r.a.createElement(m.a,{id:"mStatus",required:!0,size:"sm"},r.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-primary",onClick:function(){return J("IMPORTANT")},active:"IMPORTANT"===I},"\u26ab\xa0Important"),r.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-danger",onClick:function(){return J("URGENT")},active:"URGENT"===I},"\u26ab\xa0Urgent")))),r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"textarea-input"},r.a.createElement("strong",null,"Requester"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(L.a,{id:"mCustomer_origin",name:"mCustomer_origin",type:"textarea",style:{resize:"none"},defaultValue:T.customer_origin,readOnly:!0}))))),r.a.createElement("hr",{style:{color:"teal",backgroundColor:"teal",height:1}}),r.a.createElement(E.a,{className:"mr-2 ml-2"},r.a.createElement(g.a,{xs:"12",md:"6"},r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"textarea-input"},r.a.createElement("strong",null,"Issue"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(R.a,{theme:"snow",placeholder:"Write something...",defaultValue:T.note,onChange:function(e){return H(e)},modules:Se,formats:ke}))),r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"textarea-input"},r.a.createElement("strong",null,"Progress"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(R.a,{theme:"snow",placeholder:"Write something...",defaultValue:t.troubleshoot_progress,onChange:function(e){return Z(e)},modules:Se,formats:ke})))),r.a.createElement(g.a,{xs:"12",md:"6"},r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"textarea-input"},r.a.createElement("strong",null,"Result"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(R.a,{theme:"snow",placeholder:"Write something...",defaultValue:t.result,onChange:function(e){return te(e)},modules:Se,formats:ke}))),r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"textarea-input"},r.a.createElement("strong",null,"Note"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(R.a,{theme:"snow",placeholder:"Write something...",defaultValue:t.update_progress,onChange:function(e){return se(e)},modules:Se,formats:ke})))))),r.a.createElement(O.a,{className:"bg-gray-200"},r.a.createElement(m.a,null,r.a.createElement(c.a,{className:"btn-square float-right",type:"submit",color:"primary"},r.a.createElement("i",{className:"fa fa-dot-circle-o"})," Submit"),r.a.createElement(c.a,{onClick:he,className:"btn-square float-right",color:"danger"},r.a.createElement("i",{className:"fa fa-close"})," Cancel"))))))))]}}}]);