(this["webpackJsonpaion-ndc-batam"]=this["webpackJsonpaion-ndc-batam"]||[]).push([[28],{816:function(e,a,t){"use strict";t.r(a);var n=t(797),r=t(2),l=t.n(r),s=t(800),m=t(631),c=t(526),o=t(817),u=t(809),i=t(648),d=t(649),E=t(517),g=t(518),h=t(811),p=t(580),f=t(591),b=t(576),N=t(577),x=t(810),O=t(545),L=t(578),C=t(83),w=t.n(C),y=t(511),S=t.n(y),v=t(512),j=t.n(v),k=t(612),R=t.n(k),T=t(160),_=t.n(T),M=t(794),D=t.n(M),z=t(594);a.default=function(e){var a=Object(r.useRef)(!0),t=e,C=e.daily,y=e.showPeriode,v=e.validModal,k=Object(r.useState)({editData:[]}),T=Object(n.a)(k,2),M=T[0],P=T[1],F=Object(r.useState)(""),A=Object(n.a)(F,2),U=A[0],V=A[1],q=Object(r.useState)(null),I=Object(n.a)(q,2),J=I[0],W=I[1],G=new _.a({encodingType:"aes"}),B=Object(r.useState)(""),H=Object(n.a)(B,2),K=H[0],Q=H[1],X=Object(r.useState)(""),Y=Object(n.a)(X,2),Z=Y[0],$=Y[1],ee=Object(r.useState)(""),ae=Object(n.a)(ee,2),te=ae[0],ne=ae[1],re=Object(r.useState)(""),le=Object(n.a)(re,2),se=le[0],me=le[1],ce=Object(r.useState)(!1),oe=Object(n.a)(ce,2),ue=oe[0],ie=oe[1],de=Object(r.useState)(!1),Ee=Object(n.a)(de,2),ge=Ee[0],he=Ee[1],pe=function(){return he(!ge)},fe=C.date,be=C.updatedAt,Ne=w()(be).format("LLLL"),xe=w()(fe),Oe=xe.format("dddd"),Le=xe.format("LL"),Ce=xe.format("LT"),we=C.created_by,ye=C.updated_by;null===ye&&(ye={name:"-"});var Se={toolbar:[["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}]],clipboard:{matchVisual:!1}},ve=["bold","italic","underline","link","list","bullet","indent"];Object(r.useEffect)((function(){return function(){a.current=!1}}),[]);var je,ke=function(e){return"CLOSE"===e?"success":"OPEN"===e?"warning":"URGENT"===e?"danger":"primary"};return[l.a.createElement("tr",{id:"rowRow",key:C.uuid.toString(),className:"table-"+ke(C.status)},l.a.createElement("td",{hidden:!0},C.uuid),l.a.createElement("td",null,Oe),l.a.createElement("td",null,Le),l.a.createElement("td",null,Ce),l.a.createElement("td",null,l.a.createElement("h6",null,l.a.createElement(s.a,{pill:!0,color:ke(C.status)},l.a.createElement("i",{className:"fa fa-circle mr-1"}),C.status))),l.a.createElement("td",null,C.customer_origin),l.a.createElement("td",null,l.a.createElement(D.a,{charLimit:70,readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},C.note)),l.a.createElement("td",null,we.name),l.a.createElement("td",null,ye.name),l.a.createElement("td",{key:C.id},l.a.createElement(m.a,{size:"sm"},l.a.createElement(c.a,{id:"Detail"+C.id,hidden:(je=C.updated_by,null===je),onClick:function(){return ie(!ue)},className:"text-light bg-success"},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement(o.a,{placement:"bottom",target:"Detail"+C.id},"Show Detail"),l.a.createElement(c.a,{id:"Edit"+C.id,onClick:function(e){return function(e,t){e.preventDefault();var n={uuid:t},r=JSON.stringify(n);S.a.post("log/find",r).then((function(e){return e.json()})).then((function(e){P(e.data),V(e.data.date),W(e.data.status),Q(e.data.note),$(e.data.troubleshoot_progress),ne(e.data.result),me(e.data.update_progress)})).then((function(){a.current&&pe()})).catch((function(e){S.a.notifMessage("Anda sedang offline","danger"),console.log("Something Catch error went wrong",e)}))}(e,C.uuid)},className:"text-light bg-primary"},l.a.createElement("i",{className:"fa fa-pencil"})),l.a.createElement(o.a,{placement:"bottom",target:"Edit"+C.id},"Edit Log"),l.a.createElement(c.a,{id:"Remove"+C.id,onClick:function(){return v(C.uuid)},className:"text-light bg-danger"},l.a.createElement("i",{className:"fa fa-close"})),l.a.createElement(o.a,{placement:"bottom",target:"Remove"+C.id},"Remove Log")))),l.a.createElement("tr",{key:C.id,hidden:!ue,className:"bg-gray-200"},l.a.createElement("td",{colSpan:"12",className:"p-0 m-0"},l.a.createElement(u.a,{isOpen:ue},l.a.createElement(i.a,{className:"list-group-accent text-muted",tag:"div"},l.a.createElement(d.a,{className:"list-group-item-accent-"+ke(C.status)},l.a.createElement(E.a,null,l.a.createElement(g.a,{md:"2"},l.a.createElement(h.a,null,l.a.createElement("strong",null,"Troubleshoot Progress"))),l.a.createElement(g.a,{xs:"12",md:"10"},l.a.createElement(D.a,{readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},C.troubleshoot_progress)))),l.a.createElement(d.a,{className:"list-group-item-accent-"+ke(C.status)},l.a.createElement(E.a,null,l.a.createElement(g.a,{md:"2"},l.a.createElement(h.a,null,l.a.createElement("strong",null,"Result"))),l.a.createElement(g.a,{xs:"12",md:"10"},l.a.createElement(D.a,{readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},C.result)))),l.a.createElement(d.a,{className:"list-group-item-accent-"+ke(C.status)},l.a.createElement(E.a,null,l.a.createElement(g.a,{md:"2"},l.a.createElement(h.a,null,l.a.createElement("strong",null,"Notes"))),l.a.createElement(g.a,{xs:"12",md:"10"},l.a.createElement(D.a,{readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},C.update_progress)))),l.a.createElement(d.a,{className:"list-group-item-accent-"+ke(C.status)},l.a.createElement(E.a,null,l.a.createElement(g.a,{md:"2"},l.a.createElement(h.a,null,l.a.createElement("strong",null,"Last Updated By"))),l.a.createElement(g.a,{xs:"12",md:"4"},ye.name))),l.a.createElement(d.a,{className:"list-group-item-accent-"+ke(C.status)},l.a.createElement(E.a,null,l.a.createElement(g.a,{md:"2"},l.a.createElement(h.a,null,l.a.createElement("strong",null,"Last Updated On"))),l.a.createElement(g.a,{xs:"12",md:"4"},Ne)))),l.a.createElement(p.a,{key:M.uuid,isOpen:ge,size:"xl",toggle:pe,className:t+" modal-"+ke(C.status)},l.a.createElement(f.a,{id:"editLog",name:"editLog",onSubmit:function(e){e.preventDefault();var t=w()().format("LLLL"),n=K;0===j()(K).text().length&&(n=M.note);var r=Z;r=0===j()(Z).text().length?"":j()(M.troubleshoot_progress).text().length<j()(Z).text().length?Z+"<p><em>- "+G.get("key").name+" on "+t+"</em></p>":Z;var l=te;l=0===j()(te).text().length?"":j()(M.result).text().length<j()(te).text().length?te+"<p><em>- "+G.get("key").name+" on "+t+"</em></p>":te;var s=se;s=0===j()(se).text().length?"":j()(M.update_progress).text().length<j()(se).text().length?se+"<p><em>- "+G.get("key").name+" on "+t+"</em></p>":se;var m={uuid:M.uuid,date:U,shift:[{name:""},{name:""}],customer_origin:j()("#mCustomer_origin").val(),note:n,troubleshoot_progress:r,result:l,status:J,update_progress:s},c=JSON.stringify(m);S.a.put("log/update",c).then((function(e){return e.json()})).then((function(e){!0===e.success?(Q(""),$(""),ne(""),me(""),y(),S.a.notifMessage("Log berhasil diubah","success")):(S.a.notifMessage("Anda Selalu Salah","danger"),console.log("Something Else went wrong"))})).catch((function(e){S.a.notifMessage(" Anda sedang offline, data tidak tersimpan","danger"),console.log("Something Catch error went wrong",e)})),a.current&&pe()}},l.a.createElement(b.a,{toggle:pe},"Edit Log"),l.a.createElement(N.a,null,l.a.createElement(E.a,{className:"mr-2 ml-2"},l.a.createElement(g.a,{xs:"12",md:"6"},l.a.createElement(x.a,{row:!0},l.a.createElement(g.a,{md:"3"},l.a.createElement(h.a,{htmlFor:"date-input"},l.a.createElement("strong",null,"Date/Time"))),l.a.createElement(g.a,{xs:"12",md:"7"},l.a.createElement(z.DateTimePicker,{id:"mDate",format:"LLL",max:new Date,value:new Date(U),onChange:function(e){return V(e)}}))),l.a.createElement(x.a,{row:!0},l.a.createElement(g.a,{md:"3"},l.a.createElement(h.a,{htmlFor:"date-input"},l.a.createElement("strong",null,"Status"))),l.a.createElement(g.a,{xs:"12",md:"9"},l.a.createElement(m.a,{id:"mStatus",required:!0,size:"sm"},l.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-warning",onClick:function(){return W("OPEN")},active:"OPEN"===J},"\u26ab\xa0Open"),l.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-success",onClick:function(){return W("CLOSE")},active:"CLOSE"===J},"\u26ab\xa0Close")),l.a.createElement(m.a,{id:"mStatus",required:!0,size:"sm"},l.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-primary",onClick:function(){return W("IMPORTANT")},active:"IMPORTANT"===J},"\u26ab\xa0Important"),l.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-danger",onClick:function(){return W("URGENT")},active:"URGENT"===J},"\u26ab\xa0Urgent")))),l.a.createElement(x.a,{row:!0},l.a.createElement(g.a,{md:"3"},l.a.createElement(h.a,{htmlFor:"textarea-input"},l.a.createElement("strong",null,"Requester"))),l.a.createElement(g.a,{xs:"12",md:"9"},l.a.createElement(O.a,{id:"mCustomer_origin",name:"mCustomer_origin",type:"textarea",style:{resize:"none"},defaultValue:M.customer_origin,readOnly:!0}))))),l.a.createElement("hr",{style:{color:"teal",backgroundColor:"teal",height:1}}),l.a.createElement(E.a,{className:"mr-2 ml-2"},l.a.createElement(g.a,{xs:"12",md:"6"},l.a.createElement(x.a,{row:!0},l.a.createElement(g.a,{md:"3"},l.a.createElement(h.a,{htmlFor:"textarea-input"},l.a.createElement("strong",null,"Issue"))),l.a.createElement(g.a,{xs:"12",md:"9"},l.a.createElement(R.a,{theme:"snow",placeholder:"Write something...",defaultValue:M.note,onChange:function(e){return Q(e)},modules:Se,formats:ve}))),l.a.createElement(x.a,{row:!0},l.a.createElement(g.a,{md:"3"},l.a.createElement(h.a,{htmlFor:"textarea-input"},l.a.createElement("strong",null,"Progress"))),l.a.createElement(g.a,{xs:"12",md:"9"},l.a.createElement(R.a,{theme:"snow",placeholder:"Write something...",defaultValue:C.troubleshoot_progress,onChange:function(e){return $(e)},modules:Se,formats:ve})))),l.a.createElement(g.a,{xs:"12",md:"6"},l.a.createElement(x.a,{row:!0},l.a.createElement(g.a,{md:"3"},l.a.createElement(h.a,{htmlFor:"textarea-input"},l.a.createElement("strong",null,"Result"))),l.a.createElement(g.a,{xs:"12",md:"9"},l.a.createElement(R.a,{theme:"snow",placeholder:"Write something...",defaultValue:C.result,onChange:function(e){return ne(e)},modules:Se,formats:ve}))),l.a.createElement(x.a,{row:!0},l.a.createElement(g.a,{md:"3"},l.a.createElement(h.a,{htmlFor:"textarea-input"},l.a.createElement("strong",null,"Note"))),l.a.createElement(g.a,{xs:"12",md:"9"},l.a.createElement(R.a,{theme:"snow",placeholder:"Write something...",defaultValue:C.update_progress,onChange:function(e){return me(e)},modules:Se,formats:ve})))))),l.a.createElement(L.a,{className:"bg-gray-200"},l.a.createElement(m.a,null,l.a.createElement(c.a,{className:"btn-square float-right",type:"submit",color:"primary"},l.a.createElement("i",{className:"fa fa-dot-circle-o"})," Submit"),l.a.createElement(c.a,{onClick:pe,className:"btn-square float-right",color:"danger"},l.a.createElement("i",{className:"fa fa-close"})," Cancel"))))))))]}}}]);