(this["webpackJsonpaion-ndc-batam"]=this["webpackJsonpaion-ndc-batam"]||[]).push([[28],{867:function(e,a,t){"use strict";t.r(a);var n=t(848),l=t(2),r=t.n(l),s=t(851),m=t(650),c=t(525),o=t(868),i=t(860),u=t(667),d=t(668),E=t(516),g=t(517),h=t(862),p=t(589),f=t(600),b=t(585),N=t(586),x=t(861),C=t(547),O=t(587),w=t(83),S=t.n(w),L=t(411),y=t.n(L),k=t(509),v=t.n(k),j=t(510),R=t.n(j),T=t(622),_=t.n(T),M=t(160),D=t.n(M),P=(t(844),t(845)),q=t.n(P),z=t(603);t(621);a.default=function(e){var a=e,t=e.daily,w=e.showPeriode,L=e.validModal,k=Object(l.useState)({editData:[]}),j=Object(n.a)(k,2),T=j[0],M=j[1],P=Object(l.useState)(t.date),A=Object(n.a)(P,2),F=A[0],V=A[1],U=Object(l.useState)(null),I=Object(n.a)(U,2),J=I[0],W=I[1],G=new D.a({encodingType:"aes"}),B=Object(l.useState)(""),K=Object(n.a)(B,2),H=K[0],Q=K[1],X=Object(l.useState)(""),Y=Object(n.a)(X,2),Z=Y[0],$=Y[1],ee=Object(l.useState)(""),ae=Object(n.a)(ee,2),te=ae[0],ne=ae[1],le=Object(l.useState)(""),re=Object(n.a)(le,2),se=re[0],me=re[1],ce=Object(l.useState)(!1),oe=Object(n.a)(ce,2),ie=oe[0],ue=oe[1],de=Object(l.useState)(!1),Ee=Object(n.a)(de,2),ge=Ee[0],he=Ee[1],pe=function(){return he(!ge)},fe=t.date,be=t.updatedAt,Ne=S()(be).locale("id",y.a).format("LLLL"),xe=S()(fe).locale("id",y.a),Ce=xe.format("dddd"),Oe=xe.format("LL"),we=xe.format("LT"),Se=t.created_by,Le=t.updated_by;null===Le&&(Le={name:"-"});var ye,ke={toolbar:[["bold","italic","underline","blockquote","link"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}]],clipboard:{matchVisual:!1}},ve=["bold","italic","underline","blockquote","link","list","bullet","indent"],je=function(e){return"CLOSE"===e?"success":"OPEN"===e?"warning":"URGENT"===e?"danger":"primary"};return[r.a.createElement("tr",{id:"rowRow",key:t.uuid.toString(),className:"table-"+je(t.status)},r.a.createElement("td",{hidden:!0},t.uuid),r.a.createElement("td",null,Ce),r.a.createElement("td",null,Oe),r.a.createElement("td",null,we),r.a.createElement("td",null,r.a.createElement("h6",null,r.a.createElement(s.a,{pill:!0,color:je(t.status)},r.a.createElement("i",{className:"fa fa-circle mr-1"}),t.status))),r.a.createElement("td",null,t.customer_origin),r.a.createElement("td",null,r.a.createElement(q.a,{charLimit:70,readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},t.note)),r.a.createElement("td",null,Se.name),r.a.createElement("td",null,Le.name),r.a.createElement("td",{key:t.id},r.a.createElement(m.a,{size:"sm"},r.a.createElement(c.a,{id:"Detail"+t.id,hidden:(ye=t.updated_by,null===ye),onClick:function(){return ue(!ie)},className:"text-light bg-success"},r.a.createElement("i",{className:"fa fa-eye"})),r.a.createElement(o.a,{placement:"bottom",target:"Detail"+t.id},"Show Detail"),r.a.createElement(c.a,{id:"Edit"+t.id,onClick:function(e){return function(e,a){e.preventDefault();var t={uuid:a},n=JSON.stringify(t);v.a.post("log/find",n).then((function(e){return e.json()})).then((function(e){M(e.data),W(e.data.status),Q(e.data.note),$(e.data.troubleshoot_progress),ne(e.data.result),me(e.data.update_progress)})).then((function(){pe()})).catch((function(e){v.a.notifMessage("Anda sedang offline","danger"),console.log("Something Catch error went wrong",e)}))}(e,t.uuid)},className:"text-light bg-primary"},r.a.createElement("i",{className:"fa fa-pencil"})),r.a.createElement(o.a,{placement:"bottom",target:"Edit"+t.id},"Edit Log"),r.a.createElement(c.a,{id:"Remove"+t.id,onClick:function(){return L(t.uuid)},className:"text-light bg-danger"},r.a.createElement("i",{className:"fa fa-close"})),r.a.createElement(o.a,{placement:"bottom",target:"Remove"+t.id},"Remove Log")))),r.a.createElement("tr",{key:t.id,hidden:!ie,className:"bg-gray-200"},r.a.createElement("td",{colSpan:"12",className:"p-0 m-0"},r.a.createElement(i.a,{isOpen:ie},r.a.createElement(u.a,{className:"list-group-accent text-muted",tag:"div"},r.a.createElement(d.a,{className:"list-group-item-accent-"+je(t.status)},r.a.createElement(E.a,null,r.a.createElement(g.a,{md:"2"},r.a.createElement(h.a,null,r.a.createElement("strong",null,"Troubleshoot Progress"))),r.a.createElement(g.a,{xs:"12",md:"10"},r.a.createElement(q.a,{readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},t.troubleshoot_progress)))),r.a.createElement(d.a,{className:"list-group-item-accent-"+je(t.status)},r.a.createElement(E.a,null,r.a.createElement(g.a,{md:"2"},r.a.createElement(h.a,null,r.a.createElement("strong",null,"Result"))),r.a.createElement(g.a,{xs:"12",md:"10"},r.a.createElement(q.a,{readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},t.result)))),r.a.createElement(d.a,{className:"list-group-item-accent-"+je(t.status)},r.a.createElement(E.a,null,r.a.createElement(g.a,{md:"2"},r.a.createElement(h.a,null,r.a.createElement("strong",null,"Notes"))),r.a.createElement(g.a,{xs:"12",md:"10"},r.a.createElement(q.a,{readMoreText:"Read more \u25bc",readLessText:"Read less \u25b2",readMoreClassName:"read-more-less--more",readLessClassName:"read-more-less--less"},t.update_progress)))),r.a.createElement(d.a,{className:"list-group-item-accent-"+je(t.status)},r.a.createElement(E.a,null,r.a.createElement(g.a,{md:"2"},r.a.createElement(h.a,null,r.a.createElement("strong",null,"Last Updated By"))),r.a.createElement(g.a,{xs:"12",md:"4"},Le.name))),r.a.createElement(d.a,{className:"list-group-item-accent-"+je(t.status)},r.a.createElement(E.a,null,r.a.createElement(g.a,{md:"2"},r.a.createElement(h.a,null,r.a.createElement("strong",null,"At"))),r.a.createElement(g.a,{xs:"12",md:"4"},Ne)))),r.a.createElement(p.a,{key:T.uuid,isOpen:ge,size:"xl",toggle:pe,className:a+" modal-"+je(t.status)},r.a.createElement(f.a,{id:"editLog",name:"editLog",onSubmit:function(e){e.preventDefault();var a=H;0===R()(H).text().length&&(a=T.note);var t=Z;t=0===R()(Z).text().length?"":R()(T.troubleshoot_progress).text().length<R()(Z).text().length?Z+"<p>"+G.get("key").name+", "+Ne+"</p>":Z;var n=te;n=0===R()(te).text().length?"":R()(T.result).text().length<R()(te).text().length?te+"<p>"+G.get("key").name+", "+Ne+"</p>":te;var l=se;l=0===R()(se).text().length?"":R()(T.update_progress).text().length<R()(se).text().length?se+"<p>"+G.get("key").name+", "+Ne+"</p>":se;var r={uuid:T.uuid,date:F,shift:[{name:""},{name:""}],customer_origin:R()("#mCustomer_origin").val(),note:a,troubleshoot_progress:t,result:n,status:J,update_progress:l},s=JSON.stringify(r);v.a.put("log/update",s).then((function(e){return e.json()})).then((function(e){!0===e.success?(Q(""),$(""),ne(""),me(""),w(),v.a.notifMessage(" Log berhasil diubah","success")):(v.a.notifMessage(" Anda Selalu Salah","danger"),console.log("Something Else went wrong"))})).then((function(){pe()})).catch((function(e){v.a.notifMessage(" Koneksi Anda bermasalah","danger"),console.log("Something Catch error went wrong",e)}))}},r.a.createElement(b.a,{toggle:pe},"Edit Log"),r.a.createElement(N.a,null,r.a.createElement(E.a,{className:"mr-2 ml-2"},r.a.createElement(g.a,{xs:"12",md:"6"},r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"date-input"},r.a.createElement("strong",null,"Date/Time"))),r.a.createElement(g.a,{xs:"12",md:"6"},r.a.createElement(z.DateTimePicker,{id:"mDate",max:new Date,defaultValue:new Date(F),onChange:function(e){return V(e)}}))),r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"date-input"},r.a.createElement("strong",null,"Status"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(m.a,{id:"mStatus",required:!0,size:"sm"},r.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-warning",onClick:function(){return W("OPEN")},active:"OPEN"===J},"\u26ab\xa0Open"),r.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-success",onClick:function(){return W("CLOSE")},active:"CLOSE"===J},"\u26ab\xa0Close")),r.a.createElement(m.a,{id:"mStatus",required:!0,size:"sm"},r.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-primary",onClick:function(){return W("IMPORTANT")},active:"IMPORTANT"===J},"\u26ab\xa0Important"),r.a.createElement(c.a,{size:"sm",className:"btn-pill",color:"ghost-danger",onClick:function(){return W("URGENT")},active:"URGENT"===J},"\u26ab\xa0Urgent")))),r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"textarea-input"},r.a.createElement("strong",null,"Requester"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(C.a,{id:"mCustomer_origin",name:"mCustomer_origin",type:"text",defaultValue:T.customer_origin,required:!0}))))),r.a.createElement("hr",{style:{color:"teal",backgroundColor:"teal",height:1}}),r.a.createElement(E.a,{className:"mr-2 ml-2"},r.a.createElement(g.a,{xs:"12",md:"6"},r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"textarea-input"},r.a.createElement("strong",null,"Issue"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(_.a,{theme:"snow",placeholder:"Write something...",defaultValue:T.note,onChange:function(e){return Q(e)},modules:ke,formats:ve}))),r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"textarea-input"},r.a.createElement("strong",null,"Progress"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(_.a,{theme:"snow",placeholder:"Write something...",defaultValue:t.troubleshoot_progress,onChange:function(e){return $(e)},modules:ke,formats:ve})))),r.a.createElement(g.a,{xs:"12",md:"6"},r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"textarea-input"},r.a.createElement("strong",null,"Result"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(_.a,{theme:"snow",placeholder:"Write something...",defaultValue:t.result,onChange:function(e){return ne(e)},modules:ke,formats:ve}))),r.a.createElement(x.a,{row:!0},r.a.createElement(g.a,{md:"3"},r.a.createElement(h.a,{htmlFor:"textarea-input"},r.a.createElement("strong",null,"Note"))),r.a.createElement(g.a,{xs:"12",md:"9"},r.a.createElement(_.a,{theme:"snow",placeholder:"Write something...",defaultValue:t.update_progress,onChange:function(e){return me(e)},modules:ke,formats:ve})))))),r.a.createElement(O.a,{className:"bg-gray-200"},r.a.createElement(m.a,null,r.a.createElement(c.a,{className:"btn-square float-right",type:"submit",color:"primary"},r.a.createElement("i",{className:"fa fa-dot-circle-o"})," Submit"),r.a.createElement(c.a,{onClick:pe,className:"btn-square float-right",color:"danger"},r.a.createElement("i",{className:"fa fa-close"})," Cancel"))))))))]}}}]);